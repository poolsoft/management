<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>后台管理</title>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <link rel="stylesheet" href="css/AdminLTE.min.css">
  <link rel="stylesheet" href="css/_all-skins.min.css">
  <link rel="stylesheet" href="css/blue.css">
  <link rel="stylesheet" href="css/morris.css">
  <link rel="stylesheet" href="css/jquery-jvectormap-1.2.2.css">
  <link rel="stylesheet" href="css/datepicker3.css">
  <link rel="stylesheet" href="css/daterangepicker.css">
  <link rel="stylesheet" href="css/bootstrap3-wysihtml5.min.css">
  
  <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
  <script src="http://apps.bdimg.com/libs/angular-route/1.3.13/angular-route.js"></script>

</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  <header class="main-header" ng-include="'html/header.html'">
   
  </header>
  
  <aside class="main-sidebar" ng-include="'html/aside.html'">
    
  </aside>

<!--   <div class="content-wrapper" ng-include="'html/user/usertable.html'"> -->
<!--   </div> -->
<!--   <div class="content-wrapper" ng-include="'html/location/IBeacontable.html'"> -->
<!--   </div> -->
<!--   <div class="content-wrapper" ng-include="'html/location/GPStable.html'"> -->
<!--   </div> -->
  
  <div class="content-wrapper" ng-view="">
  </div>
  
  
  <footer class="main-footer">
<!--     <div class="pull-right hidden-xs"> -->
<!--       <b>Version</b> 2.3.7 -->
<!--     </div> -->
<!--     <strong>Copyright &copy; 2014-2016 <a href="http://almsaeedstudio.com">Almsaeed Studio</a>.</strong> All rights -->
<!--     reserved. -->
  </footer>

  
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<script src="js/jquery-2.2.3.min.js"></script>
<!-- <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script> -->
<!-- <script> -->
<!--    $.widget.bridge('uibutton', $.ui.button);  -->
<!-- </script> -->
<script src="js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="js/morris.min.js"></script>
<script src="js/jquery.sparkline.min.js"></script>
<script src="js/jquery-jvectormap-1.2.2.min.js"></script>
<script src="js/jquery-jvectormap-world-mill-en.js"></script>
<script src="js/jquery.knob.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
<script src="js/daterangepicker.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="js/bootstrap3-wysihtml5.all.min.js"></script>
<script src="js/jquery.slimscroll.min.js"></script>
<script src="js/fastclick.js"></script>
<script src="js/app.min.js"></script>
<!-- <script src="js/dashboard.js"></script> -->
<script src="js/demo.js"></script>

<script src="js/leaflet.js"></script>
<script src="js/leaflet-routing-machine.js"></script>
<script>
	var app = angular.module("myApp",['ngRoute']);
	
	app.controller("userCtrl",function($scope,$http){
		$http.get("../resources/user/users.json").success(function(data){
			$scope.users = data.users;
		});
	});
	
	app.controller("gpsCtrl",function($scope,$http){
		$http.get("../resources/location/GPS.json").success(function(data){
			$scope.GPSS = data.GPSS;
		});
	});
	
	app.controller("ibeaconCtrl",function($scope,$http){
		$http.get("../resources/location/IBeacon.json").success(function(data){
			$scope.ibeacons = data.ibeacons;
		});
	});
	
	app.controller("carCtrl",function($scope,$http){
		$http.get("../resources/car/car.json").success(function(data){
			$scope.cars = data.cars;
		});
	});
	
	app.controller("mapCtrl",function($timeout){
		function initmap(){
			var centerPoint = [31.1707739,121.406607];
			var map = L.map('leafletMap').setView(centerPoint, 19);
			
			var aerial = new L.tileLayer("../resources/Tiles/{z}/{x}/{y}.png", {
	    		maxZoom: 21,
	    		minZoom: 8,
			});
			aerial.addTo(map);
			
			L.control.scale().addTo(map);//添加比例尺
		}
		
		
		$timeout(function(){
			initmap();
		}, 100);
	});
	
	app.config(function($routeProvider){
		$routeProvider
	    .when('/user', {
	        templateUrl: 'html/user/usertable.html',
	        controller: 'userCtrl'
	    })
	    .when('/ibeacon', {
	        templateUrl: 'html/location/IBeacontable.html',
	        controller: 'ibeaconCtrl'
	    })
	    .when('/gps',{
	    	templateUrl: 'html/location/GPStable.html',
	    	controller: 'gpsCtrl'
	    })
	    .when('/car',{
	    	templateUrl: 'html/car/cartable.html',
	    	controller: 'carCtrl'
	    })
	    .when('/map',{
	    	templateUrl: 'html/map/map.html',
	    	controller: 'mapCtrl'
	    })
	    .otherwise({
	        redirectTo: '/user'
	    });
	});
</script>
</body>
</html>
